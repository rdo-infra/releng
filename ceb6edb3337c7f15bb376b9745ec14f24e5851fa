{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "37f96668_f834e53c",
        "filename": "scripts/upgrade_spec.sh",
        "patchSetId": 2
      },
      "lineNbr": 213,
      "author": {
        "id": 128
      },
      "writtenOn": "2023-06-30T06:49:17Z",
      "side": 1,
      "message": "Adding sphinx and openstackdocstheme unconditionally should not depend on the presence of \"with_doc\" but of one of the sphinx build commands that could be sphinx-build or build_sphinx. The logic should be:\n\n1. if no sphinx build command -\u003e sphinx and openstackdostheme should be in excluded_brs unconditionally.\n\n2. if there is sphinx build command and not with_doc in the spec (independently of the value) -\u003e sphinx and openstackdostheme should not be in excluded_brs unconditionally\n\n3. if there is sphinx build comand and with_doc -\u003e sphinx and openstackdostheme should be in excluded_brs unconditionally only when with_doc \u003d\u003d 0.\n\nFor case 3, i think following syntax is cleaner to avoid duplicating the common part of the list:\n\n# we are excluding some BRs from automatic generator\n%global excluded_brs doc8 bandit pre-commit hacking flake8-import-order\n# Exclude sphinx from BRs if docs are disabled\n%if ! 0%{?with_doc}\n%global excluded_brs %{excluded_brs} sphinx openstackdocstheme\n%endif",
      "range": {
        "startLine": 213,
        "startChar": 3,
        "endLine": 213,
        "endChar": 44
      },
      "revId": "ceb6edb3337c7f15bb376b9745ec14f24e5851fa",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "435448c9_0a2a82c8",
        "filename": "scripts/upgrade_spec.sh",
        "patchSetId": 2
      },
      "lineNbr": 213,
      "author": {
        "id": 757
      },
      "writtenOn": "2023-07-03T09:56:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "37f96668_f834e53c",
      "range": {
        "startLine": 213,
        "startChar": 3,
        "endLine": 213,
        "endChar": 44
      },
      "revId": "ceb6edb3337c7f15bb376b9745ec14f24e5851fa",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    }
  ]
}